@using Microsoft.AspNetCore.Http
@using PsychoWeb.Models
@{
    ViewData["Title"] = "Home Page";
}
@inject ChatManager ChatManager

<body>
@if (!User.Identity.IsAuthenticated)
{
    <div class="text-center">
        <h2 class="display-4">Welcome if you want to chat with psychologist you should log in!</h2>
        <img src="https://twitter-commerce.shopifyapps.com/auth/twitter/disconnect” alt="kek"/>
    </div>
}
else
{
    <div class="row">
        <div class="col-lg-12">
            <ul id="messages">
                @foreach (var item in ChatManager.Messages)
                {
                    <li>@User.Identity.Name said: @item.Message</li>
                }
            </ul>
            <input class="form-control" id="message-content" />
        </div>
    </div>
}

</body>

    
<script type="text/javascript">    
    var userName = '@User.Identity.Name';            
</script>
@section Scripts{
    <script data-main="scripts/main" src="https://rawgit.com/radu-matei/websocket-manager/master/src/WebSocketManager.Client.TS/dist/WebSocketManager.js"></script>
}
